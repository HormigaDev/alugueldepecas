import{_ as I,F as C,y as a,k as G,o as V,c as N,w as v,N as $,a as s,Q as z,S as U,H as Q,I as D,J as g,a0 as A,G as S}from"./index.d1c7a911.js";import{Q as F,a as L}from"./QFile.ff6f982c.js";import{E as P}from"./EventBus.62ac39c0.js";import{A as R}from"./API.dd7d2a86.js";import"./QItem.2838d7a1.js";const j=C({props:{_show:Boolean},setup(e){const o=a(e._show),t=a(""),d=a(""),m=a(""),u=a(1),l=a(""),q=a({label:"Dispon\xEDvel",value:1}),k=a([{label:"Dispon\xEDvel",value:1},{label:"Indispon\xEDvel",value:0}]),h=a([]),c=a([]),i=a({nome:!1,descricao:!1,detalhes:!1,preco:!1,localizacao:!1,imagens:!1}),n=a(""),w=a(""),f=a("");G(()=>e._show,r=>{o.value=r}),P.on("salvar-novo-anuncio",()=>{if(i.value={nome:!1,descricao:!1,detalhes:!1,preco:!1,localizacao:!1,imagens:!1},!t.value){i.value.nome=!0,n.value="Nome da pe\xE7a \xE9 obrigat\xF3rio";return}if(!d.value){i.value.descricao=!0,n.value="Descri\xE7\xE3o da pe\xE7a \xE9 obrigat\xF3ria";return}if(!m.value){i.value.detalhes=!0,n.value="Detalhes do an\xFAncio s\xE3o obrigat\xF3rios";return}if(!u.value||Number(u.value)<=0){i.value.preco=!0,n.value="Pre\xE7o da pe\xE7a \xE9 obrigat\xF3rio e deve ser maior que zero";return}if(!l.value){i.value.localizacao=!0,n.value="Localiza\xE7\xE3o da pe\xE7a \xE9 obrigat\xF3ria";return}if(!h.value.length){i.value.imagens=!0,n.value="Imagens da pe\xE7a s\xE3o obrigat\xF3rias";return}R.post("/cadastrar-novo-anuncio",{nome:t.value,descricao:d.value,detalhes:m.value,valor:Number((u.value+"").replace(",",".")),localizacao:l.value,disponibilidade:q.value.value,imagens:c.value}).then(({data:r,status:p})=>{var b,y;p!==200?(f.value=(y=(b=r.message)!=null?b:r.error)!=null?y:"Erro desconhecido",w.value="erro"):(f.value=r.message,w.value="sucesso",t.value="",d.value="",m.value="",u.value=1,l.value="",q.value={label:"Dispon\xEDvel",value:1},h.value=[],c.value=[],setTimeout(()=>{f.value=""},3e3))})});function B(r){const p=new FileReader;for(const b of r)p.readAsDataURL(b),p.onload=()=>{c.value.push(p.result)};console.log(c.value)}function E(r){console.log(r),B(r)}return{erroGeral:f,tipoErro:w,erros:i,erro:n,show:o,nome:t,descricao:d,detalhes:m,price:u,localizacao:l,disponibilidade:q,disponibilidades:k,images:h,images64:c,files:E}}}),H=S("div",{class:"text-h4 a-text"},"Cadastro de anuncio",-1),J={key:0,class:"text-red text-subtitle1"},T={key:1,class:"text-teal-13 text-subtitle1"};function K(e,o,t,d,m,u){return V(),N($,{class:"row"},{default:v(()=>[s(z,{class:"row justify-center full-width"},{default:v(()=>[H]),_:1}),e.erroGeral.length>0?(V(),N(z,{key:0,class:"text-center flex flex-center"},{default:v(()=>[e.tipoErro==="erro"?(V(),U("div",J,Q(e.erroGeral),1)):D("",!0),e.tipoErro==="sucesso"?(V(),U("div",T,Q(e.erroGeral),1)):D("",!0)]),_:1})):D("",!0),s(z,{class:"row col-12 q-pl-sm q-pr-sm"},{default:v(()=>[s(g,{error:e.erros.nome,"error-message":e.erro,class:"col-md-4 col-sm-6 col-xs-12 col-lg-4 q-mt-lg q-pl-sm q-pr-sm",modelValue:e.nome,"onUpdate:modelValue":o[0]||(o[0]=l=>e.nome=l),label:"Nome da pe\xE7a (*)"},null,8,["error","error-message","modelValue"]),s(g,{error:e.erros.preco,"error-message":e.erro,type:"number",class:"col-md-4 col-sm-6 col-xs-12 col-lg-4 q-mt-lg q-pl-sm q-pr-sm",modelValue:e.price,"onUpdate:modelValue":o[1]||(o[1]=l=>e.price=l),label:"Pre\xE7o / dia (R$) (*)"},null,8,["error","error-message","modelValue"]),s(g,{error:e.erros.descricao,"error-message":e.erro,class:"col-md-12 col-sm-12 col-xs-12 col-lg-12 q-mt-lg q-pl-sm q-pr-sm",modelValue:e.descricao,"onUpdate:modelValue":o[2]||(o[2]=l=>e.descricao=l),label:"Descri\xE7\xE3o da pe\xE7a (*)"},null,8,["error","error-message","modelValue"]),s(g,{error:e.erros.detalhes,"error-message":e.erro,type:"textarea",maxlength:"3000","input-style":"resize: none;",color:"teal-13",outlined:"",class:"col-12 q-mt-lg q-pl-sm q-pr-sm",modelValue:e.detalhes,"onUpdate:modelValue":o[3]||(o[3]=l=>e.detalhes=l),label:"Detalhes do an\xFAncio (*)"},null,8,["error","error-message","modelValue"]),s(g,{error:e.erros.localizacao,"error-message":e.erro,class:"col-md-10 col-sm-8 col-xs-12 col-lg-11 q-mt-lg q-pl-sm q-pr-sm",modelValue:e.localizacao,"onUpdate:modelValue":o[4]||(o[4]=l=>e.localizacao=l),label:"Localiza\xE7\xE3o (*)"},null,8,["error","error-message","modelValue"]),s(F,{color:"teal-13",class:"col-md-2 col-sm-4 col-xs-12 col-lg-1 q-mt-lg q-pl-sm q-pr-sm",modelValue:e.disponibilidade,"onUpdate:modelValue":o[5]||(o[5]=l=>e.disponibilidade=l),label:"Disponibilidade",options:e.disponibilidades},null,8,["modelValue","options"]),s(L,{error:e.erros.imagens,"error-message":e.erro,"onUpdate:modelValue":[e.files,o[6]||(o[6]=l=>e.images=l)],multiple:"",class:"col-12 q-pl-sm q-pr-sm q-mt-lg",color:"teal-13",modelValue:e.images,label:"Imagens (*)"},{prepend:v(()=>[s(A,{name:"image"})]),_:1},8,["error","error-message","onUpdate:modelValue","modelValue"])]),_:1})]),_:1})}var Z=I(j,[["render",K]]);export{Z as default};
